{"code_html": "\n<!doctype html>\n<!--\nPassword Recovery System — Single-Page, Client-Only, Mocked\nSpec-to-Code Map (key sections):\n1) Semantic HTML, inline CSS & JS  -> Whole file; <style> and <script> inline; no external deps.\n2) Views:\n   - Login View                   -> renderLogin()\n   - Recovery Request View        -> renderRecoveryRequest()\n   - Code + New Password View     -> renderCodeAndPassword()\n   - Authenticated Dashboard      -> renderDashboard()\n3) Deterministic token generator  -> generateResetCode(email) [documented below]\n4) Console stages                 -> console.log at: email sent, code verified, password reset, login success, course selected, file uploaded\n5) Accessibility                 -> Labels, aria-describedby, aria-live regions, focus management on view change\n6) Password UX                   -> Real-time policy checklist, strength indicator, show/hide toggles, confirm match validation\n7) State & Logout                -> In-memory state reset on logout, returns to Login\n8) Offline guarantee             -> No network calls; all logic in-browser\n-->\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>Password Recovery Demo (Client-only)</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <style>\n    /* Basic responsive layout and readable styles — Requirement: readable layout, clear states */\n    :root {\n      --bg: #0f172a;\n      --panel: #111827;\n      --text: #e5e7eb;\n      --muted: #9ca3af;\n      --accent: #2563eb;\n      --accent-2: #10b981;\n      --error: #ef4444;\n      --success: #22c55e;\n      --warning: #f59e0b;\n      --border: #334155;\n    }\n    html, body {\n      height: 100%;\n      background: linear-gradient(180deg, #0b1022, #0b1022 30%, #0d1329);\n      color: var(--text);\n      font-family: system-ui, -apple-system, Segoe UI, Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n      margin: 0;\n    }\n    header {\n      padding: 1rem;\n      text-align: center;\n    }\n    .container {\n      max-width: 720px;\n      margin: 0 auto;\n      padding: 1rem;\n    }\n    .panel {\n      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.03));\n      border: 1px solid var(--border);\n      border-radius: 14px;\n      padding: 1.25rem;\n      box-shadow: 0 10px 40px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.05);\n      backdrop-filter: blur(8px);\n    }\n    h1, h2 {\n      margin: 0 0 0.5rem 0;\n      font-weight: 700;\n      letter-spacing: 0.2px;\n    }\n    p {\n      color: var(--muted);\n      line-height: 1.5;\n    }\n    form {\n      display: grid;\n      gap: 0.75rem;\n      margin-top: 0.75rem;\n    }\n    .field {\n      display: grid;\n      gap: 0.35rem;\n    }\n    label {\n      font-weight: 600;\n    }\n    input[type=\"email\"],\n    input[type=\"text\"],\n    input[type=\"password\"],\n    select {\n      width: 100%;\n      box-sizing: border-box;\n      background: #0b1022;\n      color: var(--text);\n      border: 1px solid var(--border);\n      border-radius: 10px;\n      padding: 0.65rem 0.75rem;\n      outline: none;\n      transition: border-color 0.15s ease, box-shadow 0.15s ease;\n    }\n    input:focus,\n    select:focus {\n      border-color: var(--accent);\n      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.25);\n    }\n    .input-row {\n      display: grid;\n      grid-template-columns: 1fr auto;\n      gap: 0.5rem;\n      align-items: stretch;\n    }\n    .toggle {\n      background: transparent;\n      color: var(--muted);\n      border: 1px solid var(--border);\n      border-radius: 10px;\n      padding: 0 0.75rem;\n      cursor: pointer;\n      transition: background 0.15s ease, color 0.15s ease, border-color 0.15s ease;\n    }\n    .toggle:hover {\n      color: var(--text);\n      border-color: var(--accent);\n      background: rgba(255,255,255,0.04);\n    }\n    .actions {\n      display: flex;\n      gap: 0.5rem;\n      flex-wrap: wrap;\n      align-items: center;\n      margin-top: 0.25rem;\n    }\n    .btn {\n      background: linear-gradient(180deg, #2b67f2, #1e3fa6);\n      color: #fff;\n      border: 0;\n      border-radius: 12px;\n      padding: 0.7rem 1rem;\n      cursor: pointer;\n      font-weight: 700;\n      letter-spacing: 0.25px;\n      box-shadow: 0 6px 20px rgba(37,99,235,0.4);\n      transition: transform 0.06s ease, filter 0.15s ease, box-shadow 0.2s ease;\n    }\n    .btn:hover { filter: brightness(1.05); }\n    .btn:active { transform: translateY(1px); }\n    .btn.secondary {\n      background: transparent;\n      border: 1px solid var(--border);\n      color: var(--text);\n      box-shadow: none;\n    }\n    .linkish {\n      background: none;\n      border: none;\n      color: #93c5fd;\n      text-decoration: underline;\n      cursor: pointer;\n      padding: 0;\n      font: inherit;\n    }\n    .status {\n      margin: 0.25rem 0 0;\n      padding: 0.5rem 0.6rem;\n      border-radius: 10px;\n      font-weight: 600;\n      border: 1px solid transparent;\n    }\n    .status.success {\n      color: #022c22;\n      background: #a7f3d0;\n      border-color: #10b981;\n    }\n    .status.error {\n      color: #450a0a;\n      background: #fecaca;\n      border-color: #ef4444;\n    }\n    .status.info {\n      color: #111827;\n      background: #dbeafe;\n      border-color: #60a5fa;\n    }\n    .help {\n      color: var(--muted);\n      font-size: 0.9rem;\n    }\n    .checklist {\n      display: grid;\n      gap: 0.25rem;\n      margin: 0.25rem 0 0;\n      padding-left: 1.1rem;\n    }\n    .checklist li {\n      list-style: none;\n      position: relative;\n      padding-left: 1.1rem;\n      color: var(--muted);\n    }\n    .checklist li::before {\n      content: \"•\";\n      position: absolute;\n      left: 0;\n      top: 0;\n      color: var(--muted);\n    }\n    .checklist li.ok {\n      color: #bbf7d0;\n    }\n    .checklist li.ok::before {\n      content: \"✓\";\n      color: #22c55e;\n      font-weight: 800;\n    }\n    .checklist li.bad {\n      color: #fecaca;\n    }\n    .checklist li.bad::before {\n      content: \"✗\";\n      color: #ef4444;\n      font-weight: 800;\n    }\n    .strength {\n      display: grid;\n      grid-template-columns: 1fr auto;\n      gap: 0.5rem;\n      align-items: center;\n      margin-top: 0.25rem;\n    }\n    .bar {\n      height: 10px;\n      border-radius: 6px;\n      background: #111827;\n      border: 1px solid var(--border);\n      overflow: hidden;\n    }\n    .bar > span {\n      display: block;\n      height: 100%;\n      width: 0%;\n      background: linear-gradient(90deg, #ef4444, #f59e0b, #22c55e);\n      transition: width 0.2s ease;\n    }\n    .label-weak { color: #fca5a5; }\n    .label-med { color: #fde68a; }\n    .label-strong { color: #86efac; }\n    .inline-error {\n      color: #fecaca;\n      font-weight: 600;\n    }\n    .divider {\n      height: 1px;\n      background: var(--border);\n      margin: 0.75rem 0;\n      border-radius: 999px;\n    }\n    .row {\n      display: grid;\n      gap: 0.5rem;\n    }\n    @media (min-width: 560px) {\n      .row.two {\n        grid-template-columns: 1fr 1fr;\n      }\n    }\n    .visually-hidden {\n      position: absolute !important;\n      height: 1px; width: 1px;\n      overflow: hidden; clip: rect(1px, 1px, 1px, 1px);\n      white-space: nowrap; border: 0; padding: 0; margin: -1px;\n    }\n    footer {\n      color: var(--muted);\n      text-align: center;\n      padding: 1rem 0 2rem;\n      font-size: 0.9rem;\n    }\n  </style>\n</head>\n<body>\n  <header aria-hidden=\"true\">\n    <div class=\"container\">\n      <h1>Password Recovery Demo</h1>\n      <p>A single-file, client-only mock flow. For demo/testing only.</p>\n    </div>\n  </header>\n  <main id=\"app\" class=\"container\" role=\"main\">\n    <div class=\"panel\">\n      <p>Loading…</p>\n    </div>\n  </main>\n  <footer>\n    Runs entirely offline in your browser. No data is transmitted.\n  </footer>\n\n  <script>\n    // Deterministic token generator — Requirement: Documented and repeatable\n    // Algorithm:\n    // 1) Start with seed = 5381 (classic djb2 seed).\n    // 2) For each character c in email (lowercased & trimmed), seed = ((seed << 5) + seed) ^ c.charCodeAt(0)  (djb2 xor variant).\n    // 3) Multiply by a small odd constant 33, then take absolute value and mod 1_000_000.\n    // 4) Left-pad to 6 digits. Example: \"alex@example.edu\" -> same 6-digit code every time.\n    function generateResetCode(email) {\n      const s = (String(email || '').trim().toLowerCase());\n      let seed = 5381;\n      for (let i = 0; i < s.length; i++) {\n        seed = ((seed << 5) + seed) ^ s.charCodeAt(i);\n        seed |= 0;\n      }\n      let n = Math.abs((seed * 33) | 0) % 1000000;\n      return String(n).padStart(6, '0');\n    }\n\n    // In-memory state — Requirement: resets on logout\n    const state = {\n      isAuthenticated: false,\n      userEmail: null,\n      generatedCode: null,\n      newPassword: null\n    };\n\n    // Utility: mount view and focus first control — Requirement: move focus on view change\n    function mount(html, focusSelector = 'input, select, textarea, button') {\n      const container = document.getElementById('app');\n      container.innerHTML = '<section class=\"panel\">' + html + '</section>';\n      // Focus first focusable field\n      setTimeout(() => {\n        const first = container.querySelector('[autofocus]') || container.querySelector(focusSelector);\n        if (first && typeof first.focus === 'function') {\n          first.focus();\n        }\n      }, 0);\n    }\n\n    // Utility: escape HTML for safe text insertions\n    function esc(s) {\n      return String(s || '').replace(/[&<>\"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;',\"'\":'&#39;'}[m]));\n    }\n\n    // View: Login — Requirement: Login view with forgot password control\n    function renderLogin(prefillEmail = '') {\n      state.isAuthenticated = false;\n      const html = `\n        <h2>Log in</h2>\n        <p id=\"login-help\" class=\"help\">Enter your university account. If your password is expired or forgotten, use \"Forgot password?\".</p>\n        <form id=\"login-form\" aria-describedby=\"login-help\">\n          <div class=\"field\">\n            <label for=\"login-email\">Email or username</label>\n            <input id=\"login-email\" name=\"email\" type=\"email\" autocomplete=\"username\" required value=\"${esc(prefillEmail)}\" autofocus aria-describedby=\"login-help\">\n          </div>\n          <div class=\"field\">\n            <label for=\"login-password\">Password</label>\n            <div class=\"input-row\">\n              <input id=\"login-password\" name=\"password\" type=\"password\" autocomplete=\"current-password\" required>\n              <button type=\"button\" class=\"toggle\" aria-controls=\"login-password\" aria-label=\"Toggle password visibility\" data-toggle=\"login-password\">Show</button>\n            </div>\n          </div>\n          <div id=\"login-status\" class=\"status info\" role=\"status\" aria-live=\"polite\">Tip: You can try the reset flow via \"Forgot password?\"</div>\n          <div class=\"actions\">\n            <button class=\"btn\" type=\"submit\">Log in</button>\n            <button class=\"linkish\" type=\"button\" id=\"forgot-btn\">Forgot password?</button>\n          </div>\n        </form>\n      `;\n      mount(html);\n      // Wire up\n      const form = document.getElementById('login-form');\n      document.getElementById('forgot-btn').addEventListener('click', () => {\n        const email = /** move email along */ form.email.value;\n        renderRecoveryRequest(email);\n      });\n      form.addEventListener('submit', (e) => {\n        e.preventDefault();\n        const email = form.email.value.trim();\n        const pwd = form.password.value;\n        if (!email || !pwd) return;\n        state.userEmail = email;\n        state.isAuthenticated = true;\n        console.log('[login success]', email);\n        renderDashboard();\n      });\n      bindVisibilityToggles();\n    }\n\n    // View: Recovery Request — Requirement: console.log deterministic reset code, show notice\n    function renderRecoveryRequest(prefillEmail = '') {\n      const html = `\n        <h2>Recover your account</h2>\n        <p id=\"rr-help\" class=\"help\">Enter your email to receive a 6-digit reset code. This demo uses a deterministic code visible in the browser console for testing.</p>\n        <form id=\"rr-form\" aria-describedby=\"rr-help\">\n          <div class=\"field\">\n            <label for=\"rr-email\">Email</label>\n            <input id=\"rr-email\" name=\"email\" type=\"email\" required autocomplete=\"username\" value=\"${esc(prefillEmail)}\" autofocus>\n          </div>\n          <div id=\"rr-status\" class=\"status info\" role=\"status\" aria-live=\"polite\">Awaiting your request…</div>\n          <div class=\"actions\">\n            <button class=\"btn\" type=\"submit\">Send code</button>\n            <button class=\"btn secondary\" type=\"button\" id=\"back-to-login\">Back to login</button>\n          </div>\n        </form>\n      `;\n      mount(html);\n      document.getElementById('back-to-login').addEventListener('click', () => renderLogin(prefillEmail));\n      const form = document.getElementById('rr-form');\n      const statusEl = document.getElementById('rr-status');\n      form.addEventListener('submit', (e) => {\n        e.preventDefault();\n        const email = form.email.value.trim();\n        if (!email) return;\n        const code = generateResetCode(email);\n        state.userEmail = email;\n        state.generatedCode = code;\n        console.log('[email sent] Reset code for', email, '=>', code);\n        statusEl.className = 'status success';\n        statusEl.textContent = 'Code sent. Check the console for this demo.';\n        // Transition to next view\n        renderCodeAndPassword();\n      });\n    }\n\n    // Helpers for password policy — Requirement: real-time policy + strength indicator\n    const policy = {\n      length: (s) => s.length >= 8,\n      upper: (s) => /[A-Z]/.test(s),\n      lower: (s) => /[a-z]/.test(s),\n      number: (s) => /\\d/.test(s),\n      symbol: (s) => /[^A-Za-z0-9\\s]/.test(s)\n    };\n    function scorePassword(pw) {\n      let score = 0;\n      if (policy.length(pw)) score++;\n      if (policy.upper(pw)) score++;\n      if (policy.lower(pw)) score++;\n      if (policy.number(pw)) score++;\n      if (policy.symbol(pw)) score++;\n      return score;\n    }\n\n    // View: Code + New Password — Requirement: verify code, show errors; gate by policy; show/hide toggles; confirm match validation\n    function renderCodeAndPassword() {\n      const email = state.userEmail || '';\n      const html = `\n        <h2>Enter code and set a new password</h2>\n        <p class=\"help\" id=\"cp-help\">We sent a 6-digit code to ${esc(email || 'your email')}. For this demo, the code is deterministic: open DevTools console to see it.</p>\n        <form id=\"cp-form\" aria-describedby=\"cp-help\">\n          <div class=\"field\">\n            <label for=\"cp-code\">6-digit code</label>\n            <input id=\"cp-code\" name=\"code\" type=\"text\" inputmode=\"numeric\" pattern=\"\\\\d{6}\" maxlength=\"6\" aria-describedby=\"cp-code-err\" autofocus>\n            <div id=\"cp-code-err\" class=\"inline-error\" role=\"alert\" aria-live=\"assertive\"></div>\n          </div>\n\n          <div class=\"divider\" aria-hidden=\"true\"></div>\n\n          <div class=\"row two\">\n            <div class=\"field\">\n              <label for=\"cp-pass\">New password</label>\n              <div class=\"input-row\">\n                <input id=\"cp-pass\" name=\"password\" type=\"password\" autocomplete=\"new-password\" aria-describedby=\"policy-list policy-help\">\n                <button type=\"button\" class=\"toggle\" aria-controls=\"cp-pass\" aria-label=\"Toggle password visibility\" data-toggle=\"cp-pass\">Show</button>\n              </div>\n              <div id=\"policy-help\" class=\"help\">Must satisfy all checks:</div>\n              <ul id=\"policy-list\" class=\"checklist\" aria-live=\"polite\">\n                <li data-rule=\"length\" class=\"bad\">At least 8 characters</li>\n                <li data-rule=\"upper\" class=\"bad\">Contains an uppercase letter (A-Z)</li>\n                <li data-rule=\"lower\" class=\"bad\">Contains a lowercase letter (a-z)</li>\n                <li data-rule=\"number\" class=\"bad\">Contains a number (0-9)</li>\n                <li data-rule=\"symbol\" class=\"bad\">Contains a symbol (!@#...)</li>\n              </ul>\n              <div class=\"strength\" aria-live=\"polite\">\n                <div class=\"bar\" aria-hidden=\"true\"><span id=\"strength-bar\"></span></div>\n                <div id=\"strength-label\" class=\"label-weak\">Strength: Weak</div>\n              </div>\n            </div>\n\n            <div class=\"field\">\n              <label for=\"cp-confirm\">Confirm new password</label>\n              <div class=\"input-row\">\n                <input id=\"cp-confirm\" name=\"confirm\" type=\"password\" autocomplete=\"new-password\" aria-describedby=\"cp-confirm-err\">\n                <button type=\"button\" class=\"toggle\" aria-controls=\"cp-confirm\" aria-label=\"Toggle password visibility\" data-toggle=\"cp-confirm\">Show</button>\n              </div>\n              <div id=\"cp-confirm-err\" class=\"inline-error\" role=\"alert\" aria-live=\"assertive\"></div>\n            </div>\n          </div>\n\n          <div id=\"cp-status\" class=\"status info\" role=\"status\" aria-live=\"polite\">Enter the code and choose a strong password.</div>\n          <div class=\"actions\">\n            <button id=\"cp-submit\" class=\"btn\" type=\"submit\" disabled>Reset password</button>\n            <button class=\"btn secondary\" type=\"button\" id=\"cp-cancel\">Cancel</button>\n          </div>\n        </form>\n      `;\n      mount(html);\n      bindVisibilityToggles();\n\n      const form = document.getElementById('cp-form');\n      const pass = document.getElementById('cp-pass');\n      const confirm = document.getElementById('cp-confirm');\n      const code = document.getElementById('cp-code');\n      const submit = document.getElementById('cp-submit');\n      const statusEl = document.getElementById('cp-status');\n      const codeErr = document.getElementById('cp-code-err');\n      const confirmErr = document.getElementById('cp-confirm-err');\n      const bar = document.getElementById('strength-bar');\n      const label = document.getElementById('strength-label');\n      const list = document.getElementById('policy-list');\n\n      document.getElementById('cp-cancel').addEventListener('click', () => renderLogin(email));\n\n      function updatePolicyUI() {\n        const val = pass.value || '';\n        // checklist\n        [...list.querySelectorAll('li')].forEach(li => {\n          const rule = li.getAttribute('data-rule');\n          const ok = policy[rule](val);\n          li.classList.toggle('ok', ok);\n          li.classList.toggle('bad', !ok);\n        });\n        // strength\n        const s = scorePassword(val);\n        const pct = (s / 5) * 100;\n        bar.style.width = pct + '%';\n        label.className = s <= 2 ? 'label-weak' : s === 3 ? 'label-med' : 'label-strong';\n        label.textContent = 'Strength: ' + (s <= 2 ? 'Weak' : s === 3 ? 'Medium' : 'Strong');\n        // enable submit only if all policy pass and confirm matches\n        const allPass = s === 5;\n        const match = confirm.value && confirm.value === val;\n        submit.disabled = !(allPass && match);\n      }\n      function updateConfirmUI() {\n        const val = pass.value || '';\n        if (!confirm.value) {\n          confirmErr.textContent = '';\n        } else if (confirm.value !== val) {\n          confirmErr.textContent = 'Passwords do not match.';\n        } else {\n          confirmErr.textContent = '';\n        }\n        updatePolicyUI();\n      }\n      pass.addEventListener('input', updatePolicyUI);\n      confirm.addEventListener('input', updateConfirmUI);\n      code.addEventListener('input', () => {\n        codeErr.textContent = '';\n      });\n      updatePolicyUI();\n\n      form.addEventListener('submit', (e) => {\n        e.preventDefault();\n        const entered = (code.value || '').trim();\n        const expected = generateResetCode(email);\n        if (!/^\\d{6}$/.test(entered) || entered !== expected) {\n          codeErr.textContent = 'Invalid or incorrect code. Please check and try again.';\n          statusEl.className = 'status error';\n          statusEl.textContent = 'Code verification failed.';\n          return;\n        }\n        console.log('[code verified]', email, 'code:', entered);\n        // Passed policy/confirm because button enabled\n        const newPw = pass.value;\n        state.newPassword = newPw;\n        console.log('[password reset]', email);\n        // Consider the user logged in post-reset\n        state.isAuthenticated = true;\n        console.log('[login success]', email);\n        renderDashboard();\n      });\n    }\n\n    // View: Dashboard — Requirement: course list, file upload, logout\n    function renderDashboard() {\n      const email = state.userEmail || 'user@example.edu';\n      const html = `\n        <h2>Dashboard</h2>\n        <p class=\"help\">Welcome, ${esc(email)}. Select a course and upload your assignment before the deadline.</p>\n\n        <section aria-labelledby=\"course-label\">\n          <div class=\"field\">\n            <label id=\"course-label\" for=\"course-select\">Course</label>\n            <select id=\"course-select\" aria-describedby=\"course-help\">\n              <option value=\"\">Select a course…</option>\n              <option>CS101 - Intro to Computer Science</option>\n              <option>CS223 - Data Structures</option>\n              <option>CS341 - Algorithms</option>\n              <option>HIST210 - Modern Europe</option>\n              <option>MATH231 - Linear Algebra</option>\n              <option>STAT320 - Probability</option>\n            </select>\n            <div id=\"course-help\" class=\"help\">Choose the course to submit your file to.</div>\n          </div>\n        </section>\n\n        <div class=\"divider\" aria-hidden=\"true\"></div>\n\n        <section aria-labelledby=\"upload-label\">\n          <div class=\"field\">\n            <label id=\"upload-label\" for=\"file-input\">Upload assignment</label>\n            <input id=\"file-input\" type=\"file\" aria-describedby=\"upload-help upload-err\">\n            <div id=\"upload-help\" class=\"help\">Accepted for demo: any file. Nothing is uploaded; we only log the action.</div>\n            <div id=\"upload-err\" class=\"inline-error\" role=\"alert\" aria-live=\"assertive\"></div>\n          </div>\n          <div class=\"actions\">\n            <button id=\"upload-btn\" class=\"btn\" type=\"button\">Upload</button>\n            <button id=\"logout-btn\" class=\"btn secondary\" type=\"button\">Log out</button>\n          </div>\n          <div id=\"dash-status\" class=\"status info\" role=\"status\" aria-live=\"polite\">Not uploaded yet.</div>\n        </section>\n      `;\n      mount(html, '#course-select');\n\n      const courseSel = document.getElementById('course-select');\n      const fileInput = document.getElementById('file-input');\n      const uploadErr = document.getElementById('upload-err');\n      const dashStatus = document.getElementById('dash-status');\n\n      courseSel.addEventListener('change', () => {\n        if (courseSel.value) {\n          console.log('[course selected]', courseSel.value);\n          dashStatus.className = 'status success';\n          dashStatus.textContent = 'Selected: ' + courseSel.value;\n        } else {\n          dashStatus.className = 'status info';\n          dashStatus.textContent = 'Select a course.';\n        }\n      });\n\n      document.getElementById('upload-btn').addEventListener('click', () => {\n        uploadErr.textContent = '';\n        const course = courseSel.value;\n        const file = fileInput.files && fileInput.files[0];\n        if (!course) {\n          uploadErr.textContent = 'Please select a course.';\n          courseSel.focus();\n          return;\n        }\n        if (!file) {\n          uploadErr.textContent = 'Please choose a file to upload.';\n          fileInput.focus();\n          return;\n        }\n        console.log('[file uploaded]', 'course:', course, 'file:', file.name);\n        dashStatus.className = 'status success';\n        dashStatus.textContent = 'Uploaded \"' + file.name + '\" to ' + course + '.';\n        // Reset file for repeatable demo\n        fileInput.value = '';\n      });\n\n      document.getElementById('logout-btn').addEventListener('click', () => {\n        // Reset in-memory state — Requirement: reset to allow retry\n        state.isAuthenticated = false;\n        state.userEmail = null;\n        state.generatedCode = null;\n        state.newPassword = null;\n        renderLogin();\n      });\n    }\n\n    // Password visibility toggles — Requirement: show/hide toggles for password and confirm fields\n    function bindVisibilityToggles() {\n      document.querySelectorAll('[data-toggle]').forEach(btn => {\n        const id = btn.getAttribute('data-toggle');\n        const input = document.getElementById(id);\n        if (!input) return;\n        const setLabel = () => { btn.textContent = input.type === 'password' ? 'Show' : 'Hide'; };\n        setLabel();\n        btn.addEventListener('click', () => {\n          input.type = input.type === 'password' ? 'text' : 'password';\n          setLabel();\n          input.focus();\n        });\n      });\n    }\n\n    // Initial load -> Login\n    renderLogin();\n  </script>\n</body>\n</html>\n", "task_list": [], "evaluator_md": "SUMMARY:\nThe provided single-file index.html cleanly implements a fully client-side, mocked password recovery flow. It includes a login view, a recovery request, a code + new password gate with robust UX, and a simple dashboard that simulates course selection and file upload. It adheres to semantic HTML, inline CSS/JS, deterministic reset code generation, console-based “delivery,” accessibility considerations, state reset on logout, and no network calls.\n\nFUNCTIONAL_CHECK:\n- Single file deliverable with semantic HTML and inline CSS/JS; no external deps — PASS\n  Justification: One index.html with <style> and <script> inline; uses header/main/footer/section/form/label.\n- Commented sections mapping to spec — PASS\n  Justification: Top-of-file “Spec-to-Code Map” comment references each key section (1–8).\n- Login view with “Forgot password?” — PASS\n  Justification: renderLogin() provides email/password, visibility toggle, and a “Forgot password?” button that routes to recovery.\n- Recovery Request view: enter email; deterministic code generation and console “delivery” — PASS\n  Justification: renderRecoveryRequest(); generateResetCode(email) creates a 6-digit deterministic code; logs “[email sent] … => <code>” to console.\n- Code + New Password view: verify 6-digit code; errors if incorrect — PASS\n  Justification: renderCodeAndPassword() checks /^\\d{6}$/ and equality to expected; shows inline error and status error on failure.\n- Password UX: real-time policy checklist, strength indicator, show/hide toggles, confirm match, submit gated — PASS\n  Justification: 5 rules (length/upper/lower/number/symbol) with live checklist; bar + label (Weak/Medium/Strong); toggles on both fields; confirm mismatch error; submit disabled until all rules pass and match.\n- Console stages: email sent, code verified, password reset, login success, course selected, file uploaded — PASS\n  Justification: console.log used at each stage with distinct tags.\n- Accessibility and UX: labels, aria-describedby, aria-live, inline errors, focus management — PASS\n  Justification: Inputs are labeled; multiple aria-describedby; role=status with aria-live; inline error regions with aria-live=assertive; mount() moves focus on view change; toggles include aria-controls and update visible text.\n- State and logout: in-memory reset returns to login — PASS\n  Justification: state reset in logout handler; renderLogin() called.\n- Offline guarantee: no network calls — PASS\n  Justification: No fetch/XHR; all logic is local.\n- Dashboard: select course, upload file, log actions — PASS\n  Justification: Course <select> updates status and logs “[course selected]”; Upload validates course+file, logs “[file uploaded] …”, updates status.\n\nFAILING_ITEMS:\n- None observed against the stated requirements and inferred acceptance criteria.\n\nNEW_TASKS:\n- None.\n\nDECISION:\nPASS", "done": true, "iter": 1, "step": 3}
